/**
 * Created by Administrator on 2017/7/12.
 */
import React, {Component} from 'react';
import withWidth, {MEDIUM, LARGE} from 'material-ui/utils/withWidth';
import 'whatwg-fetch';
import GPS from '../../../utils/GPS';

const mapStyle = {
    top: '64px',
    bottom: '0px',
    left: '0px',
    right: '0px',
    position:'absolute'
};

var g_points = null;
var g_map = null;
var g_car = null;
var g_BMap = null;
var g_index = 0;

class Riding extends Component {
    componentDidMount () {
        g_points = [];
        let BMap = window.BMap;
        g_BMap = BMap;
        //获取所有点的坐标
        var points = [
            {'lng':116.320161,'lat':39.946761},
            {'lng':116.320167,'lat':39.946753},
            {'lng':116.320353,'lat':39.946697},
            {'lng':116.320556,'lat':39.946721},
            {'lng':116.320744,'lat':39.946671},
            {'lng':116.320835,'lat':39.94658},
            {'lng':116.320958,'lat':39.946469},
            {'lng':116.320955,'lat':39.946357},
            {'lng':116.3209,'lat':39.946213},
            {'lng':116.320821,'lat':39.946104},
            {'lng':116.320779,'lat':39.945976},
            {'lng':116.320818,'lat':39.945834},
            {'lng':116.32083,'lat':39.945703},
            {'lng':116.320714,'lat':39.94564},
            {'lng':116.32056,'lat':39.945589},
            {'lng':116.32041,'lat':39.945547},
            {'lng':116.320275,'lat':39.945546},
            {'lng':116.32012,'lat':39.94551},
            {'lng':116.319983,'lat':39.945512},
            {'lng':116.319845,'lat':39.945524},
            {'lng':116.319711,'lat':39.945522},
            {'lng':116.319551,'lat':39.945526},
            {'lng':116.319078,'lat':39.945471},
            {'lng':116.318939,'lat':39.945475},
            {'lng':116.31882,'lat':39.945499},
            {'lng':116.318769,'lat':39.945622},
            {'lng':116.318764,'lat':39.94576},
            {'lng':116.318767,'lat':39.94585},
            {'lng':116.318737,'lat':39.945972},
            {'lng':116.318657,'lat':39.946157},
            {'lng':116.318603,'lat':39.946276},
            {'lng':116.318574,'lat':39.94641},
            {'lng':116.318582,'lat':39.946521},
            {'lng':116.318608,'lat':39.946644},
            {'lng':116.318621,'lat':39.946757},
            {'lng':116.318659,'lat':39.946887},
            {'lng':116.318625,'lat':39.946992},
            {'lng':116.318638,'lat':39.947157},
            {'lng':116.318614,'lat':39.947336},
            {'lng':116.318615,'lat':39.947433},
            {'lng':116.318596,'lat':39.947535},
            {'lng':116.318624,'lat':39.947645},
            {'lng':116.318664,'lat':39.947761},
            {'lng':116.318609,'lat':39.947931},
            {'lng':116.318564,'lat':39.948043},
            {'lng':116.31851,'lat':39.948167},
            {'lng':116.318471,'lat':39.948287},
            {'lng':116.318453,'lat':39.948395},
            {'lng':116.318458,'lat':39.948511},
            {'lng':116.318455,'lat':39.948639},
            {'lng':116.318413,'lat':39.948755},
            {'lng':116.318376,'lat':39.948876},
            {'lng':116.318374,'lat':39.94901},
            {'lng':116.318359,'lat':39.949142},
            {'lng':116.31834,'lat':39.949247},
            {'lng':116.318314,'lat':39.949345},
            {'lng':116.318276,'lat':39.949433},
            {'lng':116.31831,'lat':39.94957},
            {'lng':116.318284,'lat':39.949703},
            {'lng':116.318292,'lat':39.949793},
            {'lng':116.318255,'lat':39.949926},
            {'lng':116.318149,'lat':39.950025},
            {'lng':116.318202,'lat':39.950112},
            {'lng':116.31823,'lat':39.9502},
            {'lng':116.318168,'lat':39.950363},
            {'lng':116.318233,'lat':39.950453},
            {'lng':116.318211,'lat':39.950546},
            {'lng':116.318218,'lat':39.950636},
            {'lng':116.318233,'lat':39.950769},
            {'lng':116.318236,'lat':39.950868},
            {'lng':116.31827,'lat':39.951149},
            {'lng':116.318202,'lat':39.951289},
            {'lng':116.318117,'lat':39.951449},
            {'lng':116.318042,'lat':39.951582},
            {'lng':116.318059,'lat':39.951726},
            {'lng':116.318094,'lat':39.951856},
            {'lng':116.318111,'lat':39.951974},
            {'lng':116.318112,'lat':39.952072},
            {'lng':116.318123,'lat':39.95221},
            {'lng':116.318114,'lat':39.952383},
            {'lng':116.318082,'lat':39.952488},
            {'lng':116.318062,'lat':39.952615},
            {'lng':116.318059,'lat':39.952749},
            {'lng':116.318054,'lat':39.952889},
            {'lng':116.318058,'lat':39.95301},
            {'lng':116.318052,'lat':39.953117},
            {'lng':116.318027,'lat':39.953212},
            {'lng':116.318012,'lat':39.953316},
            {'lng':116.317969,'lat':39.953475},
            {'lng':116.317923,'lat':39.953566},
            {'lng':116.317873,'lat':39.953718},
            {'lng':116.317851,'lat':39.953834},
            {'lng':116.317797,'lat':39.953976},
            {'lng':116.317719,'lat':39.954051},
            {'lng':116.317606,'lat':39.954201},
            {'lng':116.317582,'lat':39.954355},
            {'lng':116.317525,'lat':39.954532},
            {'lng':116.31755,'lat':39.954704},
            {'lng':116.317549,'lat':39.954795},
            {'lng':116.317543,'lat':39.954906},
            {'lng':116.317544,'lat':39.95501},
            {'lng':116.317512,'lat':39.955154},
            {'lng':116.317488,'lat':39.955261},
            {'lng':116.317412,'lat':39.955308},
            {'lng':116.317446,'lat':39.955501},
            {'lng':116.317432,'lat':39.955594},
            {'lng':116.31742,'lat':39.955747},
            {'lng':116.317409,'lat':39.955848},
            {'lng':116.317393,'lat':39.955972},
            {'lng':116.317371,'lat':39.956082},
            {'lng':116.317345,'lat':39.956178},
            {'lng':116.317322,'lat':39.956309},
            {'lng':116.317323,'lat':39.956407},
            {'lng':116.317303,'lat':39.956551},
            {'lng':116.31729,'lat':39.95669},
            {'lng':116.317308,'lat':39.956822},
            {'lng':116.317307,'lat':39.956948},
            {'lng':116.317306,'lat':39.957067},
            {'lng':116.317324,'lat':39.9572},
            {'lng':116.317298,'lat':39.957265},
            {'lng':116.31727,'lat':39.957373},
            {'lng':116.317247,'lat':39.957411},
            {'lng':116.317201,'lat':39.957521},
            {'lng':116.317171,'lat':39.957653},
            {'lng':116.317184,'lat':39.957806},
            {'lng':116.31718,'lat':39.957931},
            {'lng':116.317132,'lat':39.958062},
            {'lng':116.317126,'lat':39.958191},
            {'lng':116.317132,'lat':39.958392},
            {'lng':116.317153,'lat':39.958492},
            {'lng':116.317112,'lat':39.958623},
            {'lng':116.317063,'lat':39.958745},
            {'lng':116.317067,'lat':39.958873},
            {'lng':116.317067,'lat':39.959008},
            {'lng':116.317046,'lat':39.959155},
            {'lng':116.317032,'lat':39.95943},
            {'lng':116.317067,'lat':39.959553},
            {'lng':116.317053,'lat':39.959657},
            {'lng':116.317012,'lat':39.959786},
            {'lng':116.316948,'lat':39.959909},
            {'lng':116.316916,'lat':39.960049},
            {'lng':116.31689,'lat':39.960207},
            {'lng':116.31686,'lat':39.960335},
            {'lng':116.316819,'lat':39.960469},
            {'lng':116.316791,'lat':39.960629},
            {'lng':116.316785,'lat':39.96072},
            {'lng':116.316704,'lat':39.960893},
            {'lng':116.316695,'lat':39.96106},
            {'lng':116.316687,'lat':39.961151},
            {'lng':116.316691,'lat':39.961267},
            {'lng':116.316686,'lat':39.96138},
            {'lng':116.316632,'lat':39.961755},
            {'lng':116.316593,'lat':39.961936},
            {'lng':116.316622,'lat':39.962033},
            {'lng':116.316614,'lat':39.962141},
            {'lng':116.316579,'lat':39.962258},
            {'lng':116.316539,'lat':39.962422},
            {'lng':116.316507,'lat':39.962569},
            {'lng':116.316488,'lat':39.962704},
            {'lng':116.316458,'lat':39.962791},
            {'lng':116.316423,'lat':39.962906},
            {'lng':116.316391,'lat':39.963051},
            {'lng':116.316369,'lat':39.96318},
            {'lng':116.316355,'lat':39.963296},
            {'lng':116.316312,'lat':39.9634},
            {'lng':116.316328,'lat':39.963493},
            {'lng':116.316272,'lat':39.963618},
            {'lng':116.316212,'lat':39.963735},
            {'lng':116.316214,'lat':39.963799},
            {'lng':116.316181,'lat':39.963918},
            {'lng':116.3161,'lat':39.964061},
            {'lng':116.316132,'lat':39.964169},
            {'lng':116.316087,'lat':39.964289},
            {'lng':116.316051,'lat':39.964411},
            {'lng':116.316069,'lat':39.964442},
            {'lng':116.316046,'lat':39.964557},
            {'lng':116.316008,'lat':39.964644},
            {'lng':116.315951,'lat':39.964771},
            {'lng':116.3159,'lat':39.964904},
            {'lng':116.315835,'lat':39.965047},
            {'lng':116.315784,'lat':39.965102},
            {'lng':116.315721,'lat':39.965218},
            {'lng':116.315631,'lat':39.965282},
            {'lng':116.315644,'lat':39.965403},
            {'lng':116.315761,'lat':39.965435},
            {'lng':116.315944,'lat':39.965446},
            {'lng':116.316113,'lat':39.965448},
            {'lng':116.316265,'lat':39.965411},
            {'lng':116.316455,'lat':39.965397},
            {'lng':116.316656,'lat':39.965427},
            {'lng':116.31685,'lat':39.965431},
            {'lng':116.317048,'lat':39.965452},
            {'lng':116.317256,'lat':39.965426},
            {'lng':116.317364,'lat':39.965467},
            {'lng':116.317572,'lat':39.965473},
            {'lng':116.317696,'lat':39.965465},
            {'lng':116.317932,'lat':39.965532},
            {'lng':116.318066,'lat':39.965477},
            {'lng':116.318185,'lat':39.965508},
            {'lng':116.318301,'lat':39.965532},
            {'lng':116.318529,'lat':39.96552},
            {'lng':116.318644,'lat':39.965563},
            {'lng':116.318797,'lat':39.965622},
            {'lng':116.319002,'lat':39.965643},
            {'lng':116.319117,'lat':39.965666},
            {'lng':116.319242,'lat':39.965692},
            {'lng':116.319457,'lat':39.965733},
            {'lng':116.319658,'lat':39.965708},
            {'lng':116.319858,'lat':39.965707},
            {'lng':116.32004,'lat':39.965718},
            {'lng':116.320189,'lat':39.965737},
            {'lng':116.320494,'lat':39.965759},
            {'lng':116.320717,'lat':39.965745},
            {'lng':116.320921,'lat':39.965725},
            {'lng':116.321062,'lat':39.965687},
            {'lng':116.321184,'lat':39.965662},
            {'lng':116.321358,'lat':39.965659},
            {'lng':116.321559,'lat':39.965664},
            {'lng':116.321759,'lat':39.965683},
            {'lng':116.322103,'lat':39.965708},
            {'lng':116.322245,'lat':39.965722},
            {'lng':116.322449,'lat':39.965739},
            {'lng':116.322588,'lat':39.965723},
            {'lng':116.322705,'lat':39.965695},
            {'lng':116.322921,'lat':39.965756},
            {'lng':116.323115,'lat':39.965739},
            {'lng':116.32324,'lat':39.965767},
            {'lng':116.323364,'lat':39.965765},
            {'lng':116.323523,'lat':39.965756},
            {'lng':116.323692,'lat':39.965754},
            {'lng':116.323834,'lat':39.965705},
            {'lng':116.32401,'lat':39.965727},
            {'lng':116.324249,'lat':39.965761},
            {'lng':116.324357,'lat':39.965817},
            {'lng':116.32449,'lat':39.965857},
            {'lng':116.324611,'lat':39.965889},
            {'lng':116.324732,'lat':39.965896},
            {'lng':116.324868,'lat':39.96591},
            {'lng':116.325037,'lat':39.965908},
            {'lng':116.325161,'lat':39.965918},
            {'lng':116.325296,'lat':39.965947},
            {'lng':116.325689,'lat':39.965966},
            {'lng':116.325907,'lat':39.96598},
            {'lng':116.326024,'lat':39.966003},
            {'lng':116.32619,'lat':39.965986},
            {'lng':116.326334,'lat':39.965979},
            {'lng':116.326497,'lat':39.965964},
            {'lng':116.326688,'lat':39.965974},
            {'lng':116.32683,'lat':39.965948},
            {'lng':116.326989,'lat':39.965907},
            {'lng':116.327062,'lat':39.965891},
            {'lng':116.327189,'lat':39.965871},
            {'lng':116.327332,'lat':39.965856},
            {'lng':116.327494,'lat':39.965894},
            {'lng':116.327551,'lat':39.965904},
            {'lng':116.327679,'lat':39.965902},
            {'lng':116.327818,'lat':39.965905},
            {'lng':116.327958,'lat':39.965913},
            {'lng':116.328143,'lat':39.96591},
            {'lng':116.328295,'lat':39.965896},
            {'lng':116.328455,'lat':39.96588},
            {'lng':116.32859,'lat':39.965875},
            {'lng':116.328718,'lat':39.965854},
            {'lng':116.328901,'lat':39.965843},
            {'lng':116.329065,'lat':39.965877},
            {'lng':116.329141,'lat':39.965907},
            {'lng':116.329285,'lat':39.965935},
            {'lng':116.329471,'lat':39.965932},
            {'lng':116.329646,'lat':39.96595},
            {'lng':116.329807,'lat':39.966},
            {'lng':116.329978,'lat':39.966013},
            {'lng':116.330152,'lat':39.966004},
            {'lng':116.330328,'lat':39.966025},
            {'lng':116.330505,'lat':39.966051},
            {'lng':116.330678,'lat':39.966081},
            {'lng':116.330961,'lat':39.966088},
            {'lng':116.331118,'lat':39.966073},
            {'lng':116.331259,'lat':39.966079},
            {'lng':116.331399,'lat':39.966084},
            {'lng':116.331563,'lat':39.966093},
            {'lng':116.331713,'lat':39.966134},
            {'lng':116.331875,'lat':39.966176},
            {'lng':116.332042,'lat':39.966188},
            {'lng':116.332164,'lat':39.966263},
            {'lng':116.332325,'lat':39.966372},
            {'lng':116.332401,'lat':39.966457},
            {'lng':116.332453,'lat':39.966547},
            {'lng':116.33266,'lat':39.966565},
            {'lng':116.332812,'lat':39.966483},
            {'lng':116.332988,'lat':39.966468},
            {'lng':116.333167,'lat':39.966484},
            {'lng':116.333363,'lat':39.966411},
            {'lng':116.333558,'lat':39.96636},
            {'lng':116.333716,'lat':39.966325},
            {'lng':116.333882,'lat':39.966266},
            {'lng':116.334047,'lat':39.966215},
            {'lng':116.334215,'lat':39.966185},
            {'lng':116.334376,'lat':39.96619},
            {'lng':116.334546,'lat':39.966197},
            {'lng':116.334679,'lat':39.966178},
            {'lng':116.334805,'lat':39.966131},
            {'lng':116.334979,'lat':39.966096},
            {'lng':116.335119,'lat':39.966061},
            {'lng':116.335234,'lat':39.966015},
            {'lng':116.335369,'lat':39.966019},
            {'lng':116.335518,'lat':39.96602},
            {'lng':116.335702,'lat':39.966003},
            {'lng':116.335831,'lat':39.965979},
            {'lng':116.335965,'lat':39.965978},
            {'lng':116.336115,'lat':39.966009},
            {'lng':116.336308,'lat':39.966023},
            {'lng':116.336512,'lat':39.966037},
            {'lng':116.336636,'lat':39.966033},
            {'lng':116.336771,'lat':39.966023},
            {'lng':116.336889,'lat':39.966018},
            {'lng':116.337138,'lat':39.96604},
            {'lng':116.33732,'lat':39.966045},
            {'lng':116.33755,'lat':39.96602},
            {'lng':116.337667,'lat':39.966011},
            {'lng':116.337806,'lat':39.966004},
            {'lng':116.337969,'lat':39.96603},
            {'lng':116.338148,'lat':39.966055},
            {'lng':116.3383,'lat':39.966057},
            {'lng':116.338429,'lat':39.96605},
            {'lng':116.338672,'lat':39.966039},
            {'lng':116.338882,'lat':39.966017},
            {'lng':116.339098,'lat':39.966057},
            {'lng':116.339226,'lat':39.966069},
            {'lng':116.339435,'lat':39.966066},
            {'lng':116.339553,'lat':39.966061},
            {'lng':116.339667,'lat':39.966096},
            {'lng':116.339788,'lat':39.966098},
            {'lng':116.339929,'lat':39.966109},
            {'lng':116.340156,'lat':39.966106},
            {'lng':116.340283,'lat':39.966111},
            {'lng':116.34041,'lat':39.966113},
            {'lng':116.340675,'lat':39.966089},
            {'lng':116.340892,'lat':39.966043},
            {'lng':116.341095,'lat':39.966053},
            {'lng':116.341233,'lat':39.966044},
            {'lng':116.341375,'lat':39.966044},
            {'lng':116.341547,'lat':39.966027},
            {'lng':116.341763,'lat':39.966034},
            {'lng':116.342011,'lat':39.966035},
            {'lng':116.342148,'lat':39.966036},
            {'lng':116.342277,'lat':39.966032},
            {'lng':116.342436,'lat':39.96603},
            {'lng':116.342625,'lat':39.96599},
            {'lng':116.342733,'lat':39.96595},
            {'lng':116.342964,'lat':39.965925},
            {'lng':116.343104,'lat':39.965936},
            {'lng':116.343283,'lat':39.965934},
            {'lng':116.343412,'lat':39.965962},
            {'lng':116.343578,'lat':39.96599},
            {'lng':116.344014,'lat':39.966027},
            {'lng':116.344233,'lat':39.966122},
            {'lng':116.344382,'lat':39.966086},
            {'lng':116.344512,'lat':39.966103},
            {'lng':116.344666,'lat':39.966104},
            {'lng':116.344811,'lat':39.966115},
            {'lng':116.34497,'lat':39.966135},
            {'lng':116.345127,'lat':39.966142},
            {'lng':116.345259,'lat':39.966144},
            {'lng':116.345406,'lat':39.966144},
            {'lng':116.345571,'lat':39.96614},
            {'lng':116.345805,'lat':39.966174},
            {'lng':116.345943,'lat':39.96615},
            {'lng':116.346075,'lat':39.966143},
            {'lng':116.346265,'lat':39.966152},
            {'lng':116.346409,'lat':39.966141},
            {'lng':116.346669,'lat':39.966168},
            {'lng':116.346864,'lat':39.966167},
            {'lng':116.347067,'lat':39.966159},
            {'lng':116.347289,'lat':39.966187},
            {'lng':116.347494,'lat':39.966195},
            {'lng':116.347711,'lat':39.966181},
            {'lng':116.34793,'lat':39.966183},
            {'lng':116.348134,'lat':39.966178},
            {'lng':116.348283,'lat':39.966176},
            {'lng':116.348464,'lat':39.966163},
            {'lng':116.348862,'lat':39.966182},
            {'lng':116.34898,'lat':39.966187},
            {'lng':116.349172,'lat':39.966197},
            {'lng':116.34935,'lat':39.966212},
            {'lng':116.349556,'lat':39.966191},
            {'lng':116.349794,'lat':39.966174},
            {'lng':116.350021,'lat':39.966141},
            {'lng':116.350155,'lat':39.966136},
            {'lng':116.350289,'lat':39.966136},
            {'lng':116.350444,'lat':39.966126},
            {'lng':116.350563,'lat':39.966119},
            {'lng':116.3508,'lat':39.966119},
            {'lng':116.351053,'lat':39.966135},
            {'lng':116.351174,'lat':39.966122},
            {'lng':116.351378,'lat':39.966111},
            {'lng':116.351484,'lat':39.96607},
            {'lng':116.351643,'lat':39.966053},
            {'lng':116.351889,'lat':39.966065},
            {'lng':116.352165,'lat':39.966019},
            {'lng':116.352281,'lat':39.966042},
            {'lng':116.352524,'lat':39.966047},
            {'lng':116.352731,'lat':39.966051},
            {'lng':116.35286,'lat':39.966034},
            {'lng':116.35303,'lat':39.966066},
            {'lng':116.353226,'lat':39.966061},
            {'lng':116.353388,'lat':39.966059},
            {'lng':116.353521,'lat':39.966051},
            {'lng':116.353688,'lat':39.966046},
            {'lng':116.353875,'lat':39.966041},
            {'lng':116.354075,'lat':39.966033},
            {'lng':116.354221,'lat':39.966039},
            {'lng':116.354389,'lat':39.966046},
            {'lng':116.354738,'lat':39.966055},
            {'lng':116.354892,'lat':39.96605},
            {'lng':116.355031,'lat':39.966059},
            {'lng':116.355166,'lat':39.966057},
            {'lng':116.355315,'lat':39.966052},
            {'lng':116.355477,'lat':39.966058},
            {'lng':116.355617,'lat':39.966065},
            {'lng':116.355746,'lat':39.966076},
            {'lng':116.355856,'lat':39.966093},
            {'lng':116.35604,'lat':39.966091},
            {'lng':116.356176,'lat':39.966098},
            {'lng':116.356303,'lat':39.966087},
            {'lng':116.356442,'lat':39.966082},
            {'lng':116.356582,'lat':39.966087},
            {'lng':116.35672,'lat':39.966083},
            {'lng':116.356889,'lat':39.966084},
            {'lng':116.357,'lat':39.966092},
            {'lng':116.357313,'lat':39.96609},
            {'lng':116.357432,'lat':39.9661},
            {'lng':116.357568,'lat':39.966129},
            {'lng':116.357804,'lat':39.966094},
            {'lng':116.357951,'lat':39.966096},
            {'lng':116.358108,'lat':39.966114},
            {'lng':116.358273,'lat':39.966113},
            {'lng':116.358477,'lat':39.966125},
            {'lng':116.358609,'lat':39.966132},
            {'lng':116.358743,'lat':39.966141},
            {'lng':116.358885,'lat':39.966164},
            {'lng':116.359256,'lat':39.966178},
            {'lng':116.359446,'lat':39.966185},
            {'lng':116.359492,'lat':39.966178},
            {'lng':116.359778,'lat':39.966178},
            {'lng':116.359936,'lat':39.966177},
            {'lng':116.360079,'lat':39.96617},
            {'lng':116.360209,'lat':39.966166},
            {'lng':116.360399,'lat':39.966168},
            {'lng':116.36059,'lat':39.966137},
            {'lng':116.360821,'lat':39.966127},
            {'lng':116.361019,'lat':39.966151},
            {'lng':116.361157,'lat':39.966149},
            {'lng':116.36131,'lat':39.966155},
            {'lng':116.36151,'lat':39.966158},
            {'lng':116.361734,'lat':39.96614},
            {'lng':116.361868,'lat':39.966128},
            {'lng':116.362015,'lat':39.966093},
            {'lng':116.362215,'lat':39.966073},
            {'lng':116.362433,'lat':39.96608},
            {'lng':116.362589,'lat':39.966083},
            {'lng':116.362809,'lat':39.966119},
            {'lng':116.362947,'lat':39.966083},
            {'lng':116.363079,'lat':39.966056},
            {'lng':116.363263,'lat':39.966056},
            {'lng':116.363412,'lat':39.966054},
            {'lng':116.363592,'lat':39.966078},
            {'lng':116.363818,'lat':39.966115},
            {'lng':116.364,'lat':39.966171},
            {'lng':116.364144,'lat':39.966215},
            {'lng':116.364322,'lat':39.966213},
            {'lng':116.36452,'lat':39.966215},
            {'lng':116.364703,'lat':39.966237},
            {'lng':116.364879,'lat':39.966273},
            {'lng':116.36502,'lat':39.966248},
            {'lng':116.365169,'lat':39.966226},
            {'lng':116.365321,'lat':39.96621},
            {'lng':116.365484,'lat':39.966226},
            {'lng':116.365653,'lat':39.966244},
            {'lng':116.365866,'lat':39.966288},
            {'lng':116.366045,'lat':39.966271},
            {'lng':116.366203,'lat':39.966222},
            {'lng':116.366599,'lat':39.966336},
            {'lng':116.366725,'lat':39.966324},
            {'lng':116.3669,'lat':39.966329},
            {'lng':116.366937,'lat':39.966329},
            {'lng':116.367082,'lat':39.966303},
            {'lng':116.3672,'lat':39.966287},
            {'lng':116.36734,'lat':39.96627},
            {'lng':116.367502,'lat':39.966268},
            {'lng':116.367675,'lat':39.966281},
            {'lng':116.367865,'lat':39.966302},
            {'lng':116.368093,'lat':39.966262},
            {'lng':116.368203,'lat':39.966161},
            {'lng':116.368323,'lat':39.96606},
            {'lng':116.368654,'lat':39.966161},
            {'lng':116.36881,'lat':39.966197},
            {'lng':116.368935,'lat':39.966214},
            {'lng':116.36907,'lat':39.966231},
            {'lng':116.369209,'lat':39.96623},
            {'lng':116.369334,'lat':39.966228},
            {'lng':116.369472,'lat':39.966233},
            {'lng':116.369608,'lat':39.966201},
            {'lng':116.369766,'lat':39.966163},
            {'lng':116.369959,'lat':39.966135},
            {'lng':116.370131,'lat':39.9661},
            {'lng':116.370528,'lat':39.966108},
            {'lng':116.370707,'lat':39.966128},
            {'lng':116.370933,'lat':39.966179},
            {'lng':116.371168,'lat':39.96623},
            {'lng':116.371378,'lat':39.966215},
            {'lng':116.371548,'lat':39.966273},
            {'lng':116.371681,'lat':39.966309},
            {'lng':116.371823,'lat':39.966346},
            {'lng':116.372,'lat':39.966394},
            {'lng':116.37219,'lat':39.9664},
            {'lng':116.372366,'lat':39.966413},
            {'lng':116.372515,'lat':39.966437},
            {'lng':116.372698,'lat':39.966425},
            {'lng':116.372848,'lat':39.966456},
            {'lng':116.373025,'lat':39.966496},
            {'lng':116.373234,'lat':39.966534},
            {'lng':116.373443,'lat':39.966544},
            {'lng':116.373663,'lat':39.966545},
            {'lng':116.373844,'lat':39.966498},
            {'lng':116.373879,'lat':39.966486},
            {'lng':116.374056,'lat':39.966679},
            {'lng':116.374458,'lat':39.966544},
            {'lng':116.374647,'lat':39.966518},
            {'lng':116.374843,'lat':39.966499},
            {'lng':116.375018,'lat':39.966494},
            {'lng':116.375213,'lat':39.966499},
            {'lng':116.375403,'lat':39.966484},
            {'lng':116.375589,'lat':39.966511},
            {'lng':116.375689,'lat':39.966458},
            {'lng':116.375895,'lat':39.966436},
            {'lng':116.376024,'lat':39.966451},
            {'lng':116.376234,'lat':39.966468},
            {'lng':116.376441,'lat':39.966498},
            {'lng':116.376628,'lat':39.96661},
            {'lng':116.376785,'lat':39.966628},
            {'lng':116.376907,'lat':39.966631},
            {'lng':116.37707,'lat':39.966575},
            {'lng':116.377222,'lat':39.966569},
            {'lng':116.377412,'lat':39.966566},
            {'lng':116.377585,'lat':39.966564},
            {'lng':116.37769,'lat':39.966511},
            {'lng':116.377835,'lat':39.966491},
            {'lng':116.377999,'lat':39.966493},
            {'lng':116.378302,'lat':39.96644},
            {'lng':116.378475,'lat':39.966472},
            {'lng':116.378605,'lat':39.966471},
            {'lng':116.378724,'lat':39.966473},
            {'lng':116.378963,'lat':39.966465},
            {'lng':116.379152,'lat':39.966453},
            {'lng':116.379332,'lat':39.966432},
            {'lng':116.37949,'lat':39.966451},
            {'lng':116.379684,'lat':39.966451},
            {'lng':116.379835,'lat':39.966437},
            {'lng':116.379969,'lat':39.966435},
            {'lng':116.380125,'lat':39.966439},
            {'lng':116.380308,'lat':39.966478},
            {'lng':116.380436,'lat':39.966429},
            {'lng':116.380569,'lat':39.966371},
            {'lng':116.380716,'lat':39.966372},
            {'lng':116.380982,'lat':39.966458},
            {'lng':116.381099,'lat':39.966484},
            {'lng':116.381265,'lat':39.966531},
            {'lng':116.381663,'lat':39.966635},
            {'lng':116.381785,'lat':39.966636},
            {'lng':116.382209,'lat':39.966604},
            {'lng':116.38244,'lat':39.966594},
            {'lng':116.38257,'lat':39.966625},
            {'lng':116.382752,'lat':39.966633},
            {'lng':116.382883,'lat':39.966601},
            {'lng':116.382987,'lat':39.966544},
            {'lng':116.383154,'lat':39.966523},
            {'lng':116.383308,'lat':39.966544},
            {'lng':116.383438,'lat':39.966545},
            {'lng':116.383563,'lat':39.966525},
            {'lng':116.383786,'lat':39.966534},
            {'lng':116.383924,'lat':39.966571},
            {'lng':116.38405,'lat':39.966605},
            {'lng':116.384247,'lat':39.966626},
            {'lng':116.384439,'lat':39.966636},
            {'lng':116.384697,'lat':39.966657},
            {'lng':116.384877,'lat':39.966675},
            {'lng':116.385011,'lat':39.966686},
            {'lng':116.385217,'lat':39.966699},
            {'lng':116.385334,'lat':39.966718},
            {'lng':116.385472,'lat':39.966732},
            {'lng':116.385647,'lat':39.966752},
            {'lng':116.385849,'lat':39.966779},
            {'lng':116.386076,'lat':39.966775},
            {'lng':116.386203,'lat':39.966784},
            {'lng':116.386384,'lat':39.966801},
            {'lng':116.386761,'lat':39.966913},
            {'lng':116.386921,'lat':39.966915},
            {'lng':116.387056,'lat':39.966918},
            {'lng':116.387215,'lat':39.966944},
            {'lng':116.387344,'lat':39.966949},
            {'lng':116.387565,'lat':39.966963},
            {'lng':116.387728,'lat':39.966967},
            {'lng':116.387855,'lat':39.966947},
            {'lng':116.387988,'lat':39.966932},
            {'lng':116.388112,'lat':39.96692},
            {'lng':116.388229,'lat':39.96691},
            {'lng':116.388318,'lat':39.966902},
            {'lng':116.388388,'lat':39.967227},
            {'lng':116.388618,'lat':39.967099},
            {'lng':116.388831,'lat':39.96708},
            {'lng':116.388939,'lat':39.96704},
            {'lng':116.389052,'lat':39.966997},
            {'lng':116.389171,'lat':39.966961},
            {'lng':116.389295,'lat':39.96693},
            {'lng':116.38941,'lat':39.966906},
            {'lng':116.389614,'lat':39.966862},
            {'lng':116.389752,'lat':39.966774},
            {'lng':116.390085,'lat':39.966806},
            {'lng':116.390258,'lat':39.966832},
            {'lng':116.390432,'lat':39.966875},
            {'lng':116.390559,'lat':39.966899},
            {'lng':116.390778,'lat':39.966947},
            {'lng':116.390957,'lat':39.967006},
            {'lng':116.391137,'lat':39.967085},
            {'lng':116.391257,'lat':39.967095},
            {'lng':116.391466,'lat':39.967134},
            {'lng':116.391647,'lat':39.967076},
            {'lng':116.391853,'lat':39.967047},
            {'lng':116.392003,'lat':39.967036},
            {'lng':116.39333,'lat':39.966853},
            {'lng':116.393455,'lat':39.966864},
            {'lng':116.39346,'lat':39.967173},
            {'lng':116.393575,'lat':39.967201},
            {'lng':116.393772,'lat':39.967225},
            {'lng':116.393887,'lat':39.967123},
            {'lng':116.394012,'lat':39.967139},
            {'lng':116.394176,'lat':39.967138},
            {'lng':116.394294,'lat':39.967074},
            {'lng':116.394368,'lat':39.966985},
            {'lng':116.39452,'lat':39.96698},
            {'lng':116.394691,'lat':39.967007},
            {'lng':116.394889,'lat':39.967032},
            {'lng':116.395111,'lat':39.967047},
            {'lng':116.395308,'lat':39.967056},
            {'lng':116.395491,'lat':39.967037},
            {'lng':116.395674,'lat':39.967031},
            {'lng':116.395794,'lat':39.967065},
            {'lng':116.395945,'lat':39.96708},
            {'lng':116.39638,'lat':39.967},
            {'lng':116.396498,'lat':39.967008},
            {'lng':116.396698,'lat':39.967001},
            {'lng':116.39686,'lat':39.967003},
            {'lng':116.397077,'lat':39.967019},
            {'lng':116.397385,'lat':39.967064},
            {'lng':116.397508,'lat':39.96713},
            {'lng':116.397707,'lat':39.967112},
            {'lng':116.397868,'lat':39.967066},
            {'lng':116.397985,'lat':39.967045},
            {'lng':116.398112,'lat':39.967043},
            {'lng':116.398265,'lat':39.967017},
            {'lng':116.398645,'lat':39.966839},
            {'lng':116.398644,'lat':39.966853},
            {'lng':116.39876,'lat':39.966914},
            {'lng':116.399008,'lat':39.966958},
            {'lng':116.399135,'lat':39.966975},
            {'lng':116.399273,'lat':39.967015},
            {'lng':116.399543,'lat':39.96706},
            {'lng':116.400063,'lat':39.967099},
            {'lng':116.400188,'lat':39.967137},
            {'lng':116.400355,'lat':39.967088},
            {'lng':116.400518,'lat':39.967014},
            {'lng':116.400653,'lat':39.966939},
            {'lng':116.400751,'lat':39.966905},
            {'lng':116.400865,'lat':39.966869},
            {'lng':116.400743,'lat':39.966819},
            {'lng':116.40071,'lat':39.966733},
            {'lng':116.400586,'lat':39.966719},
            {'lng':116.400559,'lat':39.966714},
            {'lng':116.40078,'lat':39.966684},
            {'lng':116.400971,'lat':39.966731},
            {'lng':116.401157,'lat':39.966759},
            {'lng':116.401317,'lat':39.966815},
            {'lng':116.401578,'lat':39.966897},
            {'lng':116.401713,'lat':39.966964},
            {'lng':116.401896,'lat':39.967003},
            {'lng':116.402016,'lat':39.967012},
            {'lng':116.402137,'lat':39.966998},
            {'lng':116.402275,'lat':39.966969},
            {'lng':116.402346,'lat':39.966945},
            {'lng':116.40251,'lat':39.96692},
            {'lng':116.402689,'lat':39.966937},
            {'lng':116.402832,'lat':39.966918},
            {'lng':116.402999,'lat':39.966919},
            {'lng':116.403166,'lat':39.9669},
            {'lng':116.403341,'lat':39.966846},
            {'lng':116.40355,'lat':39.966838},
            {'lng':116.403678,'lat':39.966852},
            {'lng':116.403984,'lat':39.966973},
            {'lng':116.404103,'lat':39.966953},
            {'lng':116.404341,'lat':39.966996},
            {'lng':116.404484,'lat':39.967033},
            {'lng':116.404651,'lat':39.96706},
            {'lng':116.404799,'lat':39.967101},
            {'lng':116.404912,'lat':39.967157},
            {'lng':116.404997,'lat':39.967244},
            {'lng':116.405198,'lat':39.967333},
            {'lng':116.405393,'lat':39.967267},
            {'lng':116.405536,'lat':39.967242},
            {'lng':116.4057,'lat':39.967272},
            {'lng':116.405823,'lat':39.96738},
            {'lng':116.406,'lat':39.96741},
            {'lng':116.406168,'lat':39.967406},
            {'lng':116.40632,'lat':39.967476},
            {'lng':116.406469,'lat':39.967452},
            {'lng':116.406421,'lat':39.967266},
            {'lng':116.406391,'lat':39.967171},
            {'lng':116.406371,'lat':39.967078},
            {'lng':116.406338,'lat':39.966911},
            {'lng':116.406328,'lat':39.966819},
            {'lng':116.406351,'lat':39.966648},
            {'lng':116.406305,'lat':39.96652},
            {'lng':116.406138,'lat':39.96651},
            {'lng':116.405978,'lat':39.966559},
            {'lng':116.405845,'lat':39.966663},
            {'lng':116.405734,'lat':39.966538},
            {'lng':116.405761,'lat':39.966449},
            {'lng':116.405783,'lat':39.966359},
            {'lng':116.40578,'lat':39.966267},
            {'lng':116.405772,'lat':39.966105},
            {'lng':116.405774,'lat':39.965957},
            {'lng':116.405779,'lat':39.965796},
            {'lng':116.405791,'lat':39.965653},
            {'lng':116.4058,'lat':39.96556},
            {'lng':116.405677,'lat':39.965608},
            {'lng':116.405563,'lat':39.965573},
            {'lng':116.405549,'lat':39.965554},
            {'lng':116.405435,'lat':39.965517},
            {'lng':116.405039,'lat':39.965548},
        ];
        for(let i = 0;i < points.length;i++){
            var mapPoint = GPS.gcj_encrypt(points[i].lat, points[i].lng);
            mapPoint = GPS.bd_encrypt(mapPoint.lat, mapPoint.lng);
            g_points.push(new BMap.Point(mapPoint.lng, mapPoint.lat));
        }
        g_map = new BMap.Map("allmap");
        g_map.centerAndZoom(g_points[0], 14);
        g_map.enableScrollWheelZoom();
        // g_map.addControl(new BMap.NavigationControl());
        g_map.addControl(new BMap.ScaleControl());
        g_map.addControl(new BMap.OverviewMapControl({isOpen: true}));
        //画面移动到起点和终点的中间
        let centerPoint = new BMap.Point((g_points[0].lng + g_points[g_points.length - 1].lng) / 2, (g_points[0].lat + g_points[g_points.length - 1].lat) / 2);
        g_map.panTo(centerPoint);
        //连接所有点
        g_map.addOverlay(new BMap.Polyline(g_points, {strokeColor: "#A52A2A", strokeWeight: 5, strokeOpacity: 0.5}));
        //显示小车子
        g_car = new BMap.Marker(g_points[0]);
        g_map.addOverlay(g_car);
        //定时刷新
        this.timer = setInterval(
            function(){
                this.replay();
            }.bind(this)
            , 20
        );
    }

    componentWillUnmount() {
        this.timer && clearTimeout(this.timer);
    }

    replay () {
        if(g_car){
            let point = g_points[g_index];
            if(g_index > 0) {
                g_map.addOverlay(new g_BMap.Polyline([g_points[g_index - 1], point], {strokeColor: "red", strokeWeight: 1, strokeOpacity: 1}));
            }
            g_car.setPosition(point);
            // g_map.panTo(point);
            if(g_index < g_points.length - 1){
                g_index++;
            }else{
                g_index = 0;
            }
        }
    }

    render () {
        return (
            <div
                id='allmap'
                style={mapStyle} />
        )
    }
}

export default withWidth()(Riding);