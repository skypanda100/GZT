<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <meta name="apple-mobile-web-app-title" content=""/>
    <script src="../assets/js/echarts.min.js"></script>
    <link rel="stylesheet" href="../assets/css/amazeui.min.css"/>
    <link rel="stylesheet" href="../assets/css/amazeui.datatables.min.css"/>
    <link rel="stylesheet" href="../assets/css/app.css">
    <script src="../assets/js/jquery.min.js"></script>

</head>
<body data-type="sleep">
<!-- 头部 -->
<header>
    <div class="am-fl tpl-header-logo">
        <a href="javascript:;">&nbsp;&nbsp;&nbsp;gg和zdt的睡眠数据可视化统计</a>
    </div>

    <div class="tpl-header-fluid">

        <!-- 其它功能-->
        <div class="am-fr tpl-header-navbar">
            <ul>
                <li class="am-text-sm">
                    <a href="javascript:;" data-am-modal="{target: '#search-modal', closeViaDimmer: 0, width: 400, height: 250}">
                        <span class="am-icon-search"></span> 检索
                    </a>
                </li>

                <li class="am-text-sm">
                    <a href="javascript:;">
                        <span class="am-icon-plus"></span> 添加
                    </a>
                </li>

                <!-- 新提示 -->
                <li class="am-dropdown" data-am-dropdown>
                    <a href="javascript:;" class="am-dropdown-toggle" data-am-dropdown-toggle>
                        <i class="am-icon-bell"></i>
                        <span class="am-badge am-badge-warning am-round item-feed-badge">5</span>
                    </a>

                    <!-- 弹出列表 -->
                    <ul class="am-dropdown-content tpl-dropdown-content">
                        <li class="tpl-dropdown-menu-notifications">
                            <a href="javascript:;" class="tpl-dropdown-menu-notifications-item am-cf">
                                <div class="tpl-dropdown-menu-notifications-title">
                                    <i class="am-icon-line-chart"></i>
                                    <span> 有6笔新的销售订单</span>
                                </div>
                                <div class="tpl-dropdown-menu-notifications-time">
                                    12分钟前
                                </div>
                            </a>
                        </li>
                        <li class="tpl-dropdown-menu-notifications">
                            <a href="javascript:;" class="tpl-dropdown-menu-notifications-item am-cf">
                                <div class="tpl-dropdown-menu-notifications-title">
                                    <i class="am-icon-star"></i>
                                    <span> 有3个来自人事部的消息</span>
                                </div>
                                <div class="tpl-dropdown-menu-notifications-time">
                                    30分钟前
                                </div>
                            </a>
                        </li>
                        <li class="tpl-dropdown-menu-notifications">
                            <a href="javascript:;" class="tpl-dropdown-menu-notifications-item am-cf">
                                <div class="tpl-dropdown-menu-notifications-title">
                                    <i class="am-icon-folder-o"></i>
                                    <span> 上午开会记录存档</span>
                                </div>
                                <div class="tpl-dropdown-menu-notifications-time">
                                    1天前
                                </div>
                            </a>
                        </li>


                        <li class="tpl-dropdown-menu-notifications">
                            <a href="javascript:;" class="tpl-dropdown-menu-notifications-item am-cf">
                                <i class="am-icon-bell"></i> 进入列表…
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</header>

<div class="row-content am-cf">
    <div class="row am-cf">
        <div class="widget am-cf">
            <div class="widget-body-md widget-body m-fr" id="tpl-echarts">
            </div>
        </div>
    </div>
</div>

<div class="am-modal am-modal-no-btn" tabindex="-1" id="search-modal">
    <div class="am-modal-dialog">
        <div class="am-modal-hd"><span class="tpl-login-title">睡眠检索</span>
            <a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close id="search-modal-close">&times;</a>
        </div>
        <div class="tpl-form-content">
            <form class="am-form tpl-form-line-form">
                <div class="am-form-group">
                    <input type="text" class="tpl-form-input" id="start_date" name="start_date" data-am-datepicker="" placeholder="请输入开始日期">
                </div>
                <div class="am-form-group">
                    <input type="text" class="tpl-form-input" id="end_date" name="end_date" data-am-datepicker="" placeholder="请输入结束日期">
                </div>
                <div class="am-form-group">
                    <button type="button" class="am-btn am-btn-primary  am-btn-block tpl-btn-bg-color-success  tpl-login-btn" id="search">检索</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="../assets/js/amazeui.min.js"></script>
<script src="sleep.js"></script>
<script>
    $(
        function(){
            $.post("sleep.php", {},
                function(data){
                    var data_r = eval("(" + data + ")");
                    sleepData(data_r.date, data_r.gg_deep, data_r.gg_shallow, data_r.zdt_deep, data_r.zdt_shallow);
                });
        }
    )

    $("#search").click(
        function(event) {
            var start_date = $("#start_date").val();
            var end_date = $("#end_date").val();
            var arg;
            if(start_date != "" && end_date != ""){
                arg = {"start_date" : start_date, "end_date" : end_date};
            }else if(start_date != "" && end_date == ""){
                arg = {"start_date" : start_date};
            }else if(start_date = "" && end_date != ""){
                arg = {"end_date" : end_date};
            }else{
                arg = {};
            }

            $.post("sleep.php", arg,
                function(data){
                    var data_r = eval("(" + data + ")");
                    sleepData(data_r.date, data_r.gg_deep, data_r.gg_shallow, data_r.zdt_deep, data_r.zdt_shallow);
                }
            );

            $("#search-modal-close").click();
        });
</script>
</body>

</html>